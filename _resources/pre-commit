#!/usr/bin/env bash

cd "$(git rev-parse --git-dir)" && cd ..

npm install --silent
bundle install --quiet
bundle exec jekyll build --trace

# bundle exec bundle-audit
# bundle exec htmlproofer --check-html _site/
htmlhint _site
stylelint static/css/*.scss --syntax scss
bundle exec sass -c static/css/style.scss
jscs static/js/
# jshint static/js/
bundle exec kwalify -lf .link-lint.yml data/links/da.yml && bundle exec kwalify -lf .link-lint.yml data/links/en.yml
markdownlint _posts/*.markdown _posts/*/*.markdown ./*.md
git diff --check # Show whitespace errors
